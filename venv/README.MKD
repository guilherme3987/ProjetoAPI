**README.md**

# ğŸ“Š ProjetoAPI - Sistema de ConsolidaÃ§Ã£o e API de Dados

Sistema para consolidar dados de mÃºltiplos arquivos (CSV e Excel) e disponibilizÃ¡-los via API REST.

## ğŸš€ VisÃ£o Geral

O ProjetoAPI Ã© uma soluÃ§Ã£o completa para:
- **Consolidar** dados de mÃºltiplos arquivos CSV e XLSX
- **Processar** automaticamente planilhas Excel com mÃºltiplas abas
- **Disponibilizar** os dados consolidados via API REST
- **Facilitar** o acesso a dados estruturados para anÃ¡lise e aplicaÃ§Ãµes

## ğŸ“ Estrutura do Projeto

```
ProjetoAPI/
â”œâ”€â”€ venv/                          # Ambiente virtual Python
â”œâ”€â”€ App/
â”‚   â”œâ”€â”€ Extract/                   # MÃ³dulo de extraÃ§Ã£o e consolidaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ AuxFunc/
â”‚   â”‚   â”‚   â””â”€â”€ auxfunc.py         # FunÃ§Ãµes auxiliares (FileProcessor)
â”‚   â”‚   â””â”€â”€ extract.py             # Classe principal (DataConsolidator)
â”‚   â””â”€â”€ Main/
â”‚       â””â”€â”€ main.py                # Script de execuÃ§Ã£o principal
â”œâ”€â”€ Data/                          # DiretÃ³rio de dados (CSV/XLSX)
â”‚   â”œâ”€â”€ Vendas2019_20.csv
â”‚   â””â”€â”€ Vendas2023_25_Pasta.xlsx
â””â”€â”€ README.md
```

## ğŸ› ï¸ Tecnologias Utilizadas

- **Python 3.x**
- **Pandas** - ManipulaÃ§Ã£o de dados
- **Flask/FastAPI** - Framework web para API (a implementar)
- **Excel/CSV** - Formatos de entrada de dados

## âš™ï¸ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### 1. Configurar Ambiente Virtual
```bash
cd ~/projects/ProjetoAPI/venv
source bin/activate  # Linux/Mac
# ou
.\Scripts\activate   # Windows
```

### 2. Instalar DependÃªncias
```bash
pip install pandas flask
```

### 3. Estrutura de DiretÃ³rios
Certifique-se de que os arquivos de dados estÃ£o em:
```
/home/guilherme/projects/ProjetoAPI/venv/Data/
```

## ğŸ¯ Como Usar

### ConsolidaÃ§Ã£o de Dados
```bash
cd App/Main
python main.py
```

### Exemplo de SaÃ­da
```
ğŸ“ Processando 2 arquivos em: /home/guilherme/projects/ProjetoAPI/venv/Data

--- Processando CSV: Vendas2019_20.csv ---
CSV lido: Vendas2019_20.csv - 306 linhas
CSV adicionado: Vendas2019_20.csv

--- Processando XLSX: Vendas2023_25_Pasta.xlsx ---
 Analisando arquivo: Vendas2023_25_Pasta.xlsx
  NÃºmero de planilhas: 3
  Planilhas: ['Vendas', 'Clientes', 'Produtos']
x MULTIPLAS PLANILHAS DETECTADAS
Lendo XLSX com mÃºltiplas planilhas: Vendas2023_25_Pasta.xlsx
 Planilha 'Vendas': 150 linhas
 Planilha 'Clientes': 50 linhas
 Planilha 'Produtos': 30 linhas
    Total consolidado do arquivo: 230 linhas
 XLSX adicionado: Vendas2023_25_Pasta.xlsx

 CONSOLIDAÃ‡ÃƒO CONCLUÃDA!
 Total de linhas: 536
 Total de colunas: 10
```

## ğŸ”§ Funcionalidades

### DataConsolidator
- **ConsolidaÃ§Ã£o automÃ¡tica** de mÃºltiplos arquivos
- **Suporte a CSV e XLSX**
- **DetecÃ§Ã£o inteligente** de planilhas mÃºltiplas
- **Metadados** de origem dos dados

### FileProcessor
- **VerificaÃ§Ã£o de formato** de arquivos
- **AnÃ¡lise de estrutura** de planilhas Excel
- **Listagem de diretÃ³rios**
- **ConfiguraÃ§Ã£o flexÃ­vel** de caminhos

## ğŸ“¡ API (Plano de ImplementaÃ§Ã£o)

### Endpoints Propostos

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| GET | `/api/data` | Retorna todos os dados consolidados |
| GET | `/api/data/{id}` | Retorna registro especÃ­fico |
| GET | `/api/estatisticas` | EstatÃ­sticas dos dados |
| GET | `/api/colunas` | Lista de colunas disponÃ­veis |
| POST | `/api/filtrar` | Filtros personalizados |
| GET | `/api/metadados` | Metadados das fontes |

### Exemplo de Uso da API
```python
# Buscar todos os dados
GET /api/data

# Filtrar por perÃ­odo
POST /api/filtrar
{
    "coluna": "data",
    "operador": "between",
    "valor": ["2023-01-01", "2023-12-31"]
}

# EstatÃ­sticas
GET /api/estatisticas
```

## ğŸ—ƒï¸ Estrutura de Dados

### Dados Consolidados
Os dados incluem metadados automÃ¡ticos:
- `_sheet_name`: Nome da planilha de origem (para XLSX)
- `_file_name`: Nome do arquivo de origem

### Formato de Resposta da API
```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "coluna1": "valor1",
            "coluna2": "valor2",
            "_sheet_name": "Vendas",
            "_file_name": "Vendas2023_25_Pasta.xlsx"
        }
    ],
    "pagination": {
        "total": 1000,
        "page": 1,
        "per_page": 50
    },
    "metadata": {
        "colunas": ["coluna1", "coluna2", ...],
        "tipos": {"coluna1": "string", "coluna2": "number"}
    }
}
```

## ğŸ”„ Fluxo de Dados

1. **Entrada**: Arquivos CSV/XLSX no diretÃ³rio `Data/`
2. **Processamento**: ConsolidaÃ§Ã£o automÃ¡tica pelo `DataConsolidator`
3. **SaÃ­da**: DataFrame unificado pronto para API
4. **API**: Endpoints REST para acesso aos dados

## ğŸš§ PrÃ³ximos Passos

### Fase 1 - API BÃ¡sica
- [ ] Implementar servidor Flask/FastAPI
- [ ] Criar endpoints bÃ¡sicos
- [ ] Adicionar documentaÃ§Ã£o Swagger

### Fase 2 - Funcionalidades AvanÃ§adas
- [ ] AutenticaÃ§Ã£o e autorizaÃ§Ã£o
- [ ] Cache de dados
- [ ] PaginaÃ§Ã£o eficiente
- [ ] Filtros complexos

### Fase 3 - ProduÃ§Ã£o
- [ ] ContainerizaÃ§Ã£o com Docker
- [ ] Logs e monitoramento
- [ ] Deploy automatizado

## ğŸ› SoluÃ§Ã£o de Problemas

### Erro Comum: ImportaÃ§Ã£o de MÃ³dulos
```python
# No main.py, garantir o path correto:
import os
import sys
current_dir = os.path.dirname(os.path.abspath(__file__))
parent_dir = os.path.dirname(current_dir)
sys.path.append(parent_dir)
```

### Arquivos NÃ£o Encontrados
- Verificar se os arquivos estÃ£o no diretÃ³rio `Data/`
- Confirmar permissÃµes de leitura
- Validar formatos suportados (.csv, .xlsx)

## ğŸ“Š Exemplos de Uso

### ConsolidaÃ§Ã£o ProgramÃ¡tica
```python
from Extract.extract import DataConsolidator

# Uso bÃ¡sico
consolidator = DataConsolidator()
dados = consolidator.get_data_frame()

# Com diretÃ³rio customizado
consolidator = DataConsolidator('/caminho/alternativo')
```

## ğŸ¤ ContribuiÃ§Ã£o

1. Fork o projeto
2. Crie uma branch para sua feature
3. Commit suas mudanÃ§as
4. Push para a branch
5. Abra um Pull Request

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo LICENSE para detalhes.

---

**Desenvolvido por** Guilherme  
**RepositÃ³rio**: `~/projects/ProjetoAPI/`

Para dÃºvidas ou sugestÃµes, abra uma issue no repositÃ³rio do projeto.